import{i as E,r as s,o as X,b as Y,M as A,z as D,v as w,x as L,S as N,U as V,q as M,e as m,f as I,L as U,G as O,B as q,D as G}from"./vendor.9f2f1c6d.js";import{g as z}from"./direction.8b21c0ae.js";import{_ as j}from"./index.45eac6e5.js";const F=E({props:{popoverCustomClass:{type:String},closeOnClickOutside:{type:Boolean,default:!0},zIndex:{type:Number,default:2001}},emits:["opend","closed"],setup(d,{expose:S,emit:h}){const B=d,t=s(!1),l=s(!1),p=s(""),g=s();X(()=>{document.addEventListener("click",_)}),Y(()=>{document.removeEventListener("click",_)});const _=e=>{!B.closeOnClickOutside||t.value&&!g.value.contains(e.target)&&(t.value=!1)},n=s({width:200,height:200,top:0,left:0}),x=async(e,o)=>{setTimeout(()=>{if(!e.actionSetting)return;const{actionSetting:a}=e,{actionType:f,actionClickType:i,actionClickValue:c}=a;if(f===1&&i===1){const{w:r,h:u,direction:y}=c,[C,k,$,b]=z(o,{width:r||200,height:u||200},y);n.value={width:r||200,height:u||200,left:C,top:k},p.value=`${$-C}px ${b-k}px`,t.value=!0,l.value=y===0}})},v=()=>{t.value=!1,l.value=!1},P=(e,o)=>{t.value?v():x(e,o)},T=({w:e,h:o,direction:a},f)=>{setTimeout(()=>{const[i,c,r,u]=z(f,{width:e||200,height:o||200},a);n.value={width:e||200,height:o||200,left:i,top:c},p.value=`${r-i}px ${u-c}px`,t.value=!0,l.value=a===0})};return A(()=>t.value,e=>{h(e?"opend":"closed")}),S({open:x,close:v,toggle:P,defaultOpen:T}),(e,o)=>{const a=M("Icon");return m(),D(V,{to:"body"},[w(N,{name:"zoomIn"},{default:L(()=>[t.value?(m(),I("div",{key:0,ref_key:"actionPopover",ref:g,class:q(["action-popover",d.popoverCustomClass]),style:G({width:n.value.width+"px",height:n.value.height+"px",top:n.value.top+"px",left:n.value.left+"px",transformOrigin:p.value,zIndex:d.zIndex})},[U(e.$slots,"default",{},void 0,!0),l.value?(m(),I("div",{key:0,class:"close",onClick:v},[w(a,{name:"close"})])):O("",!0)],6)):O("",!0)]),_:3})])}}});var Q=j(F,[["__scopeId","data-v-50df7cdc"]]);export{Q as default};
