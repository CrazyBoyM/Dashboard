import{i as E,r as s,o as X,b as Y,M as A,z as D,v as w,x as L,S as V,U as M,q as N,e as f,f as O,L as U,G as S,B as q,D as G}from"./vendor.9f2f1c6d.js";import{g as B}from"./direction.8b21c0ae.js";import{_ as j}from"./index.561fee4b.js";const F=E({props:{popoverCustomClass:{type:String},closeOnClickOutside:{type:Boolean,default:!0}},emits:["opend","closed"],setup(m,{expose:P,emit:h}){const T=m,t=s(!1),i=s(!1),p=s(""),_=s();X(()=>{document.addEventListener("click",g)}),Y(()=>{document.removeEventListener("click",g)});const g=e=>{!T.closeOnClickOutside||t.value&&!_.value.contains(e.target)&&(t.value=!1)},n=s({width:200,height:200,top:0,left:0}),C=async(e,o)=>{setTimeout(()=>{if(!e.actionSetting)return;const{actionSetting:a}=e,{actionType:d,actionClickType:l,actionClickValue:c}=a;if(d===1&&l===1){const{w:r,h:u,direction:k}=c,[y,x,b,z]=B(o,{width:r||200,height:u||200},k);n.value={width:r||200,height:u||200,left:y,top:x},p.value=`${b-y}px ${z-x}px`,t.value=!0,i.value=k===0}})},v=()=>{t.value=!1,i.value=!1},I=(e,o)=>{t.value?v():C(e,o)},$=({w:e,h:o,direction:a},d)=>{setTimeout(()=>{const[l,c,r,u]=B(d,{width:e||200,height:o||200},a);n.value={width:e||200,height:o||200,left:l,top:c},p.value=`${r-l}px ${u-c}px`,t.value=!0,i.value=a===0})};return A(()=>t.value,e=>{h(e?"opend":"closed")}),P({open:C,close:v,toggle:I,defaultOpen:$}),(e,o)=>{const a=N("Icon");return f(),D(M,{to:"body"},[w(V,{name:"zoomIn"},{default:L(()=>[t.value?(f(),O("div",{key:0,ref_key:"actionPopover",ref:_,class:q(["action-popover",m.popoverCustomClass]),style:G({width:n.value.width+"px",height:n.value.height+"px",top:n.value.top+"px",left:n.value.left+"px",transformOrigin:p.value})},[U(e.$slots,"default",{},void 0,!0),i.value?(f(),O("div",{key:0,class:"close",onClick:v},[w(a,{name:"close"})])):S("",!0)],6)):S("",!0)]),_:3})])}}});var Q=j(F,[["__scopeId","data-v-8065b1ea"]]);export{Q as default};
