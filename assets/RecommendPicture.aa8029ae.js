import{i as R,r,M as U,f as t,h as s,H as h,v as O,x as q,F as v,q as M,e as a,B as k,A as C,ah as w,y as p,G as $}from"./vendor.9f2f1c6d.js";import{_ as G,d as E}from"./index.561fee4b.js";const T={key:0,class:"wrapper"},K={class:"tab-title-wrapper"},J={class:"tab-container"},Q={key:0,class:"text"},W={key:1,class:"text"},X={key:2,class:"item-wrapper"},Y=["onClick"],Z={class:"img-wrapper"},ee=["src"],te={class:"tab-container"},ae={key:0,class:"text"},se={key:1,class:"text"},le={key:2,class:"item-wrapper"},ne=["onClick"],oe={class:"img-wrapper"},ie=["src"],re={class:"sub-tab-container"},ue=["onClick"],ce={class:"tab-container"},ve={class:"item-wrapper"},de=["onClick"],pe={class:"img-wrapper"},he=["src"],ge={class:"load-more"},_e=["loading"],me=R({emits:["submit"],setup(fe,{emit:j}){const g=r(!1),_=r(!1),o=r(1),i=r(!1),u=r(!1),m=r([]),f=r([]),b=r([]),x=r(1),z=[{label:"\u98CE\u666F",value:9},{label:"4K",value:36},{label:"\u6E05\u65B0",value:15},{label:"\u840C\u5BA0",value:14},{label:"\u6E38\u620F",value:5},{label:"\u6C7D\u8F66",value:12},{label:"\u65F6\u5C1A",value:10},{label:"\u4F53\u80B2",value:16}],y=r(9),S=async()=>{try{i.value=!0,u.value=!1;const l=encodeURIComponent("https://cn.bing.com/HPImageArchive.aspx?format=js&idx=0&n=8&mkt=zh-CN"),n=await fetch(`${E}/api/transfer?target=${l}&noHeaders=1`,{headers:{"content-type":"application/json; charset=utf-8"}}),{images:d}=await n.json(),e=encodeURIComponent("https://cn.bing.com/HPImageArchive.aspx?format=js&idx=8&n=8&mkt=zh-CN"),c=await fetch(`${E}/api/transfer?target=${e}&noHeaders=1`,{headers:{"content-type":"application/json; charset=utf-8"}}),{images:B}=await c.json();B.shift();const V=[...d,...B];m.value=V.map(P=>{const D=`https://cn.bing.com/${P.url}`,H=`https://cn.bing.com/${P.urlbase}_320x240.jpg&rf=LaDigue_1920x1080.jpg&pid=hp`;return{url:D,thumb:H}})}catch(l){u.value=!0,console.error(l)}finally{i.value=!1}},F=async()=>{try{i.value=!0,u.value=!1;const l=await fetch(`${E}/photos?pageSize=18`),{errCode:n,data:d}=await l.json();if(n===200)f.value=d.list.map(e=>({url:e.urls.raw,thumb:e.urls.thumb}));else throw new Error("Api server error")}catch(l){u.value=!0,console.error(l)}finally{i.value=!1}},A=async(l=!1)=>{l&&(b.value=[],x.value=1);try{i.value=!0,u.value=!1;const n=await fetch(`${E}/api/360img?cid=${y.value}&page=${x.value}&pageSize=18`),{errno:d,data:e}=await n.json();if(d===0)b.value=[...b.value,...e.list.map(c=>({url:c.url.replace("http","https"),thumb:`${c.url.replace("http","https")}?x-oss-process=image/resize,w_300/quality,q_90`}))];else throw new Error("Api server error")}catch(n){u.value=!0,console.error(n)}finally{i.value=!1}},N=()=>{_.value=!0,g.value||(g.value=!0)};U(()=>[g.value,o.value,y.value],()=>{o.value===1?(!m.value||m.value.length===0)&&S():o.value===2?(!f.value||f.value.length===0)&&F():o.value===3&&A(!0)});const I=()=>{x.value++,A()},L=l=>{j("submit",l),_.value=!1};return(l,n)=>{const d=M("easy-dialog");return a(),t(v,null,[s("button",{type:"button",class:"btn btn-small btn-primary",style:{margin:"0","margin-right":"5px"},onClick:N},h(l.$t("\u4ECA\u65E5\u58C1\u7EB8\u63A8\u8350")),1),O(d,{modelValue:_.value,"onUpdate:modelValue":n[3]||(n[3]=e=>_.value=e),title:l.$t("\u4ECA\u65E5\u58C1\u7EB8\u63A8\u8350"),width:"min(760px, 94vw)",height:"min(560px, 80vh)"},{default:q(()=>[g.value?(a(),t("div",T,[s("div",K,[s("div",{class:k(["title",o.value===1&&"active"]),onClick:n[0]||(n[0]=e=>o.value=1)},h(l.$t("\u5FC5\u5E94\u58C1\u7EB8")),3),s("div",{class:k(["title",o.value===3&&"active"]),onClick:n[1]||(n[1]=e=>o.value=3)},h(l.$t("360\u58C1\u7EB8")),3),s("div",{class:k(["title",o.value===2&&"active"]),onClick:n[2]||(n[2]=e=>o.value=2)},"UNSPLAH",2)]),C(s("div",J,[i.value?(a(),t("div",Q,"Loading...")):u.value?(a(),t("div",W,"Something Error...")):(a(),t("div",X,[(a(!0),t(v,null,p(m.value,e=>(a(),t("div",{class:"item",key:e.url,onClick:c=>L(e.url)},[s("div",Z,[e.url?(a(),t("img",{key:0,src:e.thumb,loading:"lazy"},null,8,ee)):$("",!0)])],8,Y))),128)),(a(),t(v,null,p(4,e=>s("div",{class:"item-fake",key:e})),64))]))],512),[[w,o.value===1]]),C(s("div",te,[i.value?(a(),t("div",ae,"Loading...")):u.value?(a(),t("div",se,"Something Error...")):(a(),t("div",le,[(a(!0),t(v,null,p(f.value,e=>(a(),t("div",{class:"item",key:e.url,onClick:c=>L(e.url)},[s("div",oe,[e.url?(a(),t("img",{key:0,src:e.thumb,loading:"lazy"},null,8,ie)):$("",!0)])],8,ne))),128)),(a(),t(v,null,p(4,e=>s("div",{class:"item-fake",key:e})),64))]))],512),[[w,o.value===2]]),C(s("div",re,[(a(),t(v,null,p(z,e=>s("div",{class:k(["sub-tab-title",y.value===e.value&&"active"]),key:e.value,onClick:c=>y.value=e.value},h(l.$t(e.label)),11,ue)),64))],512),[[w,o.value===3]]),C(s("div",ce,[s("div",ve,[(a(!0),t(v,null,p(b.value,e=>(a(),t("div",{class:"item",key:e.url,onClick:c=>L(e.url)},[s("div",pe,[e.url?(a(),t("img",{key:0,src:e.thumb,loading:"lazy"},null,8,he)):$("",!0)])],8,de))),128)),(a(),t(v,null,p(4,e=>s("div",{class:"item-fake",key:e})),64))]),s("div",ge,[s("button",{class:"btn btn-warning",loading:i.value,onClick:I},h(i.value?"LOADING...":"LOAD MORE"),9,_e)])],512),[[w,o.value===3]])])):$("",!0)]),_:1},8,["modelValue","title"])],64)}}});var ke=G(me,[["__scopeId","data-v-278833f9"]]);export{ke as default};
